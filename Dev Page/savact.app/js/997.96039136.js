"use strict";(globalThis["webpackChunksavactapp"]=globalThis["webpackChunksavactapp"]||[]).push([[997],{43827:(e,l,t)=>{t.r(l),t.d(l,{default:()=>$});var a=t(59835),n=t(86970);const o={class:"q-px-md q-pt-sm q-pb-none"},s={class:"col-auto"},i={key:0},u={class:"col-12 text-h6 text-left"},m={class:"col-12 text-left"},c={class:"row col-10 justify-between"},r={class:"text-no-wrap"},d=(0,a._)("span",null,":  ",-1),v={key:2,class:"text-red"};function p(e,l,t,p,y,w){const b=(0,a.up)("q-btn"),f=(0,a.up)("q-card-section"),g=(0,a.up)("q-card"),h=(0,a.up)("key-or-name-input"),T=(0,a.up)("q-btn-toggle"),q=(0,a.up)("q-icon"),k=(0,a.up)("q-input"),C=(0,a.up)("date-time-input"),W=(0,a.up)("remaining-time"),_=(0,a.up)("time-span-input"),x=(0,a.up)("wallet-eosio"),V=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(V,null,{default:(0,a.w5)((()=>[(0,a._)("div",o,[(0,a.Wm)(g,{class:"col q-my-sm card"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{class:"row items-center justify-left"},{default:(0,a.w5)((()=>{var l;return[(0,a._)("div",s,(0,n.zw)(e.t("payOnThe")),1),(0,a.Wm)(b,{class:"col-auto q-ml-sm",dense:"",label:`${null===(l=e.chain)||void 0===l?void 0:l.name} ${e.t("network")}`,onClick:e.showWalletDialog},null,8,["label","onClick"])]})),_:1})])),_:1}),(0,a.Wm)(g,{class:"q-my-sm card"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(h,{class:"q-mt-sm",modelValue:e.recipient,"onUpdate:modelValue":l[0]||(l[0]=l=>e.recipient=l),outlined:"",label:e.t("recipient"),walletOption:""},null,8,["modelValue","label"])])),_:1})])),_:1}),(0,a.Wm)(g,{class:"q-my-sm card"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(T,{modelValue:e.isBuyRam,"onUpdate:modelValue":l[1]||(l[1]=l=>e.isBuyRam=l),class:"q-mt-none q-mb-sm","no-caps":"",rounded:"",unelevated:"","toggle-color":"blue","text-color":"blue",style:{border:"1px solid #027be3"},options:[{label:e.t("buyRam"),value:!0},{label:e.t("sellRam"),value:!1}]},null,8,["modelValue","options"])])),_:1})])),_:1}),e.isBuyRam?((0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(g,{class:"q-my-sm card"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(k,{outlined:"","bottom-slots":"",modelValue:e.fund,"onUpdate:modelValue":l[3]||(l[3]=l=>e.fund=l),type:"number",label:e.t("amount"),class:"full-width","hide-bottom-space":""},{before:(0,a.w5)((()=>[(0,a.Wm)(q,{name:"monetization_on"})])),append:(0,a.w5)((()=>[(0,a.Wm)(b,{size:"sm",class:"row q-px-sm q-py-none q-ma-none",onClick:l[2]||(l[2]=l=>e.showSymbol=!0)},{default:(0,a.w5)((()=>[(0,a._)("div",u,(0,n.zw)(e.systemTokenSymbol),1),(0,a._)("div",m,(0,n.zw)(e.tokenContract),1)])),_:1})])),_:1},8,["modelValue","label"])])),_:1})])),_:1}),(0,a.Wm)(g,{class:"q-my-sm card"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a._)("div",c,[(0,a.Wm)(T,{modelValue:e.fixTimeType,"onUpdate:modelValue":l[4]||(l[4]=l=>e.fixTimeType=l),class:"q-mt-none q-mb-sm","no-caps":"",rounded:"",unelevated:"","toggle-color":"blue","text-color":"blue",style:{border:"1px solid #027be3"},options:[{label:e.t("absoluteTime"),value:!0},{label:e.t("relativeTime"),value:!1}]},null,8,["modelValue","options"]),!0===e.fixTimeType?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a.Wm)(C,{class:"q-mb-sm",modelValue:e.absolutLimit,"onUpdate:modelValue":l[5]||(l[5]=l=>e.absolutLimit=l)},null,8,["modelValue"]),(0,a._)("div",null,[(0,a._)("span",r,(0,n.zw)(e.t("timelimit")),1),d,(0,a.Wm)(W,{modelValue:e.absolutLimit,"onUpdate:modelValue":l[6]||(l[6]=l=>e.absolutLimit=l),timeOverMsg:e.t("timeIsOver")},null,8,["modelValue","timeOverMsg"])])],64)):!1===e.fixTimeType?((0,a.wg)(),(0,a.j4)(_,{key:1,modelValue:e.relativeLimit,"onUpdate:modelValue":l[7]||(l[7]=l=>e.relativeLimit=l)},null,8,["modelValue"])):(0,a.kq)("",!0),e.timeIsTooHigh?((0,a.wg)(),(0,a.iD)("div",v,(0,n.zw)(e.t("timeToHigh")),1)):(0,a.kq)("",!0)])])),_:1})])),_:1})])):(0,a.kq)("",!0),(0,a.Wm)(g,{class:"q-mt-md card"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{class:"row justify-between"},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{class:"col q-pr-md"}),e.walletStyle?((0,a.wg)(),(0,a.j4)(b,{key:0,class:"col-12 col-sm-auto q-mt-md",label:"Send","icon-right":"send",color:"blue",onClick:e.send,disable:e.loadingConfirm},null,8,["onClick","disable"])):(0,a.kq)("",!0)])),_:1})])),_:1})])])),_:1})}var y=t(28045),w=t(92868),b=t(79343),f=t(41258),g=t(47045),h=t(6827),T=t(5980),q=t(94345),k=t(62659),C=t(60499),W=t(27712),_=t(7580),x=t(72354),V=t(17779),S=function(e,l,t,a){function n(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,o){function s(e){try{u(a.next(e))}catch(l){o(l)}}function i(e){try{u(a["throw"](e))}catch(l){o(l)}}function u(e){e.done?t(e.value):n(e.value).then(s,i)}u((a=a.apply(e,l||[])).next())}))};const H=(0,a.aZ)({name:"page-savpay-ram",components:{KeyOrNameInput:w["default"],WalletEosio:y["default"],TimeSpanInput:b["default"],DateTimeInput:f["default"],RemainingTime:g["default"]},setup(){var e,l;const t=(0,W.QT)({useScope:"global"}).t.bind(this),n=(0,k.r)(),o=(0,a.Fl)((()=>n.getWalletStyle)),s=(0,C.iH)(!1),i=(0,C.iH)(!0),u=(0,C.iH)(void 0),m=(0,C.iH)(new Date(Date.now()+6048e5)),c=(0,C.iH)(604800),r=(0,a.Fl)((()=>Math.round(m.value.getTime()/1e3))),d=(0,a.Fl)((()=>(u.value?r.value:c.value)>4294967295)),v=(0,a.Fl)((()=>n.selectedConnect)),p=(0,C.iH)(""),y=(0,C.iH)(""),w=(0,C.iH)(!1),b=(0,C.iH)((null===(l=null===(e=n.selectedConnect)||void 0===e?void 0:e.chainParams.systemToken)||void 0===l?void 0:l.contract)?n.selectedConnect.chainParams.systemToken.contract:"eosio.token"),f=(0,C.iH)(0),g=(0,C.iH)(4),H=(0,C.iH)("EOS"),U=(0,a.Fl)((()=>{var e;return null===(e=n.selectedConnect)||void 0===e?void 0:e.chainParams})),P=(0,a.Fl)((()=>n.selectedConnect&&n.selectedConnect.chainParams.systemToken?n.selectedConnect.chainParams.systemToken.symbol:"EOS")),F=(0,a.Fl)((()=>{var e,l;return b.value==(null===(l=null===(e=n.selectedConnect)||void 0===e?void 0:e.chainParams.systemToken)||void 0===l?void 0:l.contract)&&H.value==P.value})),Z=(0,a.Fl)((()=>{var e,l;if(f.value<0)return"";const t=H.value!=P.value||(null===(l=null===(e=n.selectedConnect)||void 0===e?void 0:e.chainParams.systemToken)||void 0===l?void 0:l.contract)!=b.value;return`${(0,q.AssetToString)({amount:BigInt(Math.round(f.value*Math.pow(10,g.value))),symbol:{name:H.value,precision:g.value}})}${t?" "+b.value:""}`})),D=(0,a.Fl)((()=>{let e=u.value?`!${(0,_.base58Time)(Math.round(m.value.getTime()/1e3))}`:`/${(0,_.base58Time)(c.value)}`;return`RAM@${y.value}${e}`}));function I(){return!1!==L()||(h.Z.create({type:"negative",message:t("errSavPayNotAvailable"),position:"top"}),!1)}function L(){if(n.selectedConnect&&n.selectedConnect.chainParams)return!!n.selectedConnect.chainParams.savpayContract}const M=(0,a.Fl)((()=>{var e;return null===(e=v.value)||void 0===e?void 0:e.chainParams}));function O(){return S(this,void 0,void 0,(function*(){if(s.value=!0,I()&&n.walletUser&&"string"==typeof n.walletUser.name){const e={isError:!1};let l;l=i.value?yield T.Connect.sendCustomAsset(e,n.walletUser,{from:n.walletUser.name,to:M.value.savpayContract,quantity:Z.value,memo:D.value},b.value,!1,n.walletUser.permission):yield T.Connect.sendTrx(e,n.walletUser,n.walletUser.name,M.value.savpayContract,"removeram",{from:n.walletUser.name,to:y.value},!1,n.walletUser.permission),(0,x.trxSigningErrorHandling)(e,l,t)&&v&&(yield(0,x.broadcastTrx)(e,v.value,l,t))&&V.log("Successfull broadcast")}s.value=!1}))}return{t,isBuyRam:i,sender:p,recipient:y,fund:f,fixTimeType:u,absolutLimit:m,timeIsTooHigh:d,relativeLimit:c,payAsset:Z,memoMsg:D,precision:g,tokenContract:b,chain:U,showSymbol:w,showWalletDialog:n.showWalletDialog,connect:v,isSystemToken:F,systemTokenSymbol:P,walletStyle:o,send:O,loadingConfirm:s,chainParams:M}}});var U=t(11639),P=t(69885),F=t(44458),Z=t(63190),D=t(68879),I=t(1389),L=t(13119),M=t(22857),O=t(69984),Q=t.n(O);const R=(0,U.Z)(H,[["render",p]]),$=R;Q()(H,"components",{QPage:P.Z,QCard:F.Z,QCardSection:Z.Z,QBtn:D.Z,QBtnToggle:I.Z,QInput:L.Z,QIcon:M.Z})}}]);