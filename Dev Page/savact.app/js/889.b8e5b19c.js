"use strict";(globalThis["webpackChunksavactapp"]=globalThis["webpackChunksavactapp"]||[]).push([[889],{6419:(e,l,a)=>{a.r(l),a.d(l,{default:()=>$});var t=a(59835),n=a(86970);const o={class:"q-px-md q-pt-sm q-pb-none"},i={class:"col-auto"},s={key:0},u={class:"col-12 text-h6 text-left"},m={class:"col-12 text-left"},c={class:"row col-10 justify-between"},d={class:"text-no-wrap"},r=(0,t._)("span",null,":  ",-1),v={key:2,class:"text-red"};function p(e,l,a,p,y,w){const b=(0,t.up)("q-btn"),f=(0,t.up)("q-card-section"),h=(0,t.up)("q-card"),g=(0,t.up)("key-or-name-input"),T=(0,t.up)("q-btn-toggle"),q=(0,t.up)("q-icon"),W=(0,t.up)("q-input"),k=(0,t.up)("date-time-input"),C=(0,t.up)("remaining-time"),x=(0,t.up)("time-span-input"),_=(0,t.up)("wallet-eosio"),V=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(V,null,{default:(0,t.w5)((()=>[(0,t._)("div",o,[(0,t.Wm)(h,{class:"col q-my-sm card cardMaxWidth"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{class:"row items-center justify-left"},{default:(0,t.w5)((()=>{var l;return[(0,t._)("div",i,(0,n.zw)(e.t("payOnThe")),1),(0,t.Wm)(b,{class:"col-auto q-ml-sm",dense:"",label:`${null===(l=e.chain)||void 0===l?void 0:l.name} ${e.t("network")}`,onClick:e.showWalletDialog},null,8,["label","onClick"])]})),_:1})])),_:1}),(0,t.Wm)(h,{class:"q-my-sm card cardMaxWidth"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t.Wm)(g,{class:"q-mt-sm",modelValue:e.recipient,"onUpdate:modelValue":l[0]||(l[0]=l=>e.recipient=l),outlined:"",label:e.t("recipient"),walletOption:""},null,8,["modelValue","label"])])),_:1})])),_:1}),(0,t.Wm)(h,{class:"q-my-sm card cardMaxWidth"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t.Wm)(T,{modelValue:e.isBuyRam,"onUpdate:modelValue":l[1]||(l[1]=l=>e.isBuyRam=l),class:"q-mt-none q-mb-sm","no-caps":"",rounded:"",unelevated:"","toggle-color":"blue","text-color":"blue",style:{border:"1px solid #027be3"},options:[{label:e.t("buyRam"),value:!0},{label:e.t("sellRam"),value:!1}]},null,8,["modelValue","options"])])),_:1})])),_:1}),e.isBuyRam?((0,t.wg)(),(0,t.iD)("div",s,[(0,t.Wm)(h,{class:"q-my-sm card cardMaxWidth"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t.Wm)(W,{outlined:"","bottom-slots":"",modelValue:e.fund,"onUpdate:modelValue":l[3]||(l[3]=l=>e.fund=l),type:"number",label:e.t("amount"),class:"full-width","hide-bottom-space":""},{before:(0,t.w5)((()=>[(0,t.Wm)(q,{name:"monetization_on"})])),append:(0,t.w5)((()=>[(0,t.Wm)(b,{size:"sm",class:"row q-px-sm q-py-none q-ma-none",onClick:l[2]||(l[2]=l=>e.showSymbol=!0)},{default:(0,t.w5)((()=>[(0,t._)("div",u,(0,n.zw)(e.systemTokenSymbol),1),(0,t._)("div",m,(0,n.zw)(e.tokenContract),1)])),_:1})])),_:1},8,["modelValue","label"])])),_:1})])),_:1}),(0,t.Wm)(h,{class:"q-my-sm card cardMaxWidth"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,null,{default:(0,t.w5)((()=>[(0,t._)("div",c,[(0,t.Wm)(T,{modelValue:e.fixTimeType,"onUpdate:modelValue":l[4]||(l[4]=l=>e.fixTimeType=l),class:"q-mt-none q-mb-sm","no-caps":"",rounded:"",unelevated:"","toggle-color":"blue","text-color":"blue",style:{border:"1px solid #027be3"},options:[{label:e.t("absoluteTime"),value:!0},{label:e.t("relativeTime"),value:!1}]},null,8,["modelValue","options"]),!0===e.fixTimeType?((0,t.wg)(),(0,t.iD)(t.HY,{key:0},[(0,t.Wm)(k,{class:"q-mb-sm",modelValue:e.absolutLimit,"onUpdate:modelValue":l[5]||(l[5]=l=>e.absolutLimit=l)},null,8,["modelValue"]),(0,t._)("div",null,[(0,t._)("span",d,(0,n.zw)(e.t("timelimit")),1),r,(0,t.Wm)(C,{modelValue:e.absolutLimit,"onUpdate:modelValue":l[6]||(l[6]=l=>e.absolutLimit=l),timeOverMsg:e.t("timeIsOver")},null,8,["modelValue","timeOverMsg"])])],64)):!1===e.fixTimeType?((0,t.wg)(),(0,t.j4)(x,{key:1,modelValue:e.relativeLimit,"onUpdate:modelValue":l[7]||(l[7]=l=>e.relativeLimit=l)},null,8,["modelValue"])):(0,t.kq)("",!0),e.timeIsTooHigh?((0,t.wg)(),(0,t.iD)("div",v,(0,n.zw)(e.t("timeToHigh")),1)):(0,t.kq)("",!0)])])),_:1})])),_:1})])):(0,t.kq)("",!0),(0,t.Wm)(h,{class:"q-mt-md card cardMaxWidth"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{class:"row justify-between"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{class:"col q-pr-md"}),e.walletStyle?((0,t.wg)(),(0,t.j4)(b,{key:0,class:"col-12 col-sm-auto q-mt-md",label:"Send","icon-right":"send",color:"blue",onClick:e.send,disable:e.loadingConfirm},null,8,["onClick","disable"])):(0,t.kq)("",!0)])),_:1})])),_:1})])])),_:1})}var y=a(28045),w=a(14889),b=a(79343),f=a(46033),h=a(22759),g=a(6827),T=a(5980),q=a(94345),W=a(62659),k=a(60499),C=a(27712),x=a(7580),_=a(72354),V=a(17779),S=function(e,l,a,t){function n(e){return e instanceof a?e:new a((function(l){l(e)}))}return new(a||(a=Promise))((function(a,o){function i(e){try{u(t.next(e))}catch(l){o(l)}}function s(e){try{u(t["throw"](e))}catch(l){o(l)}}function u(e){e.done?a(e.value):n(e.value).then(i,s)}u((t=t.apply(e,l||[])).next())}))};const H=(0,t.aZ)({name:"page-savpay-ram",components:{KeyOrNameInput:w["default"],WalletEosio:y["default"],TimeSpanInput:b["default"],DateTimeInput:f["default"],RemainingTime:h["default"]},setup(){var e,l;const a=(0,C.QT)({useScope:"global"}).t.bind(this),n=(0,W.r)(),o=(0,t.Fl)((()=>n.getWalletStyle)),i=(0,k.iH)(!1),s=(0,k.iH)(!0),u=(0,k.iH)(void 0),m=(0,k.iH)(new Date(Date.now()+6048e5)),c=(0,k.iH)(604800),d=(0,t.Fl)((()=>Math.round(m.value.getTime()/1e3))),r=(0,t.Fl)((()=>(u.value?d.value:c.value)>4294967295)),v=(0,t.Fl)((()=>n.selectedConnect)),p=(0,k.iH)(""),y=(0,k.iH)(""),w=(0,k.iH)(!1),b=(0,k.iH)((null===(l=null===(e=n.selectedConnect)||void 0===e?void 0:e.chainParams.systemToken)||void 0===l?void 0:l.contract)?n.selectedConnect.chainParams.systemToken.contract:"eosio.token"),f=(0,k.iH)(0),h=(0,k.iH)(4),H=(0,k.iH)("EOS"),U=(0,t.Fl)((()=>{var e;return null===(e=n.selectedConnect)||void 0===e?void 0:e.chainParams})),M=(0,t.Fl)((()=>n.selectedConnect&&n.selectedConnect.chainParams.systemToken?n.selectedConnect.chainParams.systemToken.symbol:"EOS")),P=(0,t.Fl)((()=>{var e,l;return b.value==(null===(l=null===(e=n.selectedConnect)||void 0===e?void 0:e.chainParams.systemToken)||void 0===l?void 0:l.contract)&&H.value==M.value})),F=(0,t.Fl)((()=>{var e,l;if(f.value<0)return"";const a=H.value!=M.value||(null===(l=null===(e=n.selectedConnect)||void 0===e?void 0:e.chainParams.systemToken)||void 0===l?void 0:l.contract)!=b.value;return`${(0,q.AssetToString)({amount:BigInt(Math.round(f.value*Math.pow(10,h.value))),symbol:{name:H.value,precision:h.value}})}${a?" "+b.value:""}`})),Z=(0,t.Fl)((()=>{let e=u.value?`!${(0,x.base58Time)(Math.round(m.value.getTime()/1e3))}`:`/${(0,x.base58Time)(c.value)}`;return`RAM@${y.value}${e}`}));function D(){return!1!==I()||(g.Z.create({type:"negative",message:a("errSavPayNotAvailable"),position:"top"}),!1)}function I(){if(n.selectedConnect&&n.selectedConnect.chainParams)return!!n.selectedConnect.chainParams.savpayContract}const L=(0,t.Fl)((()=>{var e;return null===(e=v.value)||void 0===e?void 0:e.chainParams}));function O(){return S(this,void 0,void 0,(function*(){if(i.value=!0,D()&&n.walletUser&&"string"==typeof n.walletUser.name){const e={isError:!1};let l;l=s.value?yield T.Connect.sendCustomAsset(e,n.walletUser,{from:n.walletUser.name,to:L.value.savpayContract,quantity:F.value,memo:Z.value},b.value,!1,n.walletUser.permission):yield T.Connect.sendTrx(e,n.walletUser,n.walletUser.name,L.value.savpayContract,"removeram",{from:n.walletUser.name,to:y.value},!1,n.walletUser.permission),(0,_.trxSigningErrorHandling)(e,l,a)&&v&&(yield(0,_.broadcastTrx)(e,v.value,l,a))&&V.log("Successfull broadcast")}i.value=!1}))}return{t:a,isBuyRam:s,sender:p,recipient:y,fund:f,fixTimeType:u,absolutLimit:m,timeIsTooHigh:r,relativeLimit:c,payAsset:F,memoMsg:Z,precision:h,tokenContract:b,chain:U,showSymbol:w,showWalletDialog:n.showWalletDialog,connect:v,isSystemToken:P,systemTokenSymbol:M,walletStyle:o,send:O,loadingConfirm:i,chainParams:L}}});var U=a(11639),M=a(69885),P=a(44458),F=a(63190),Z=a(68879),D=a(1389),I=a(13119),L=a(22857),O=a(69984),Q=a.n(O);const R=(0,U.Z)(H,[["render",p]]),$=R;Q()(H,"components",{QPage:M.Z,QCard:P.Z,QCardSection:F.Z,QBtn:Z.Z,QBtnToggle:D.Z,QInput:I.Z,QIcon:L.Z})}}]);