"use strict";(globalThis["webpackChunksavactapp"]=globalThis["webpackChunksavactapp"]||[]).push([[689],{43843:(e,l,t)=>{t.r(l),t.d(l,{default:()=>Te});var o=t(59835),a=t(86970),i=t(61957);const n={class:"q-px-md q-pt-sm q-pb-none"},s={class:"col-auto"},u={class:"q-pr-xs q-pb-sm"},d={class:"q-pr-xs"},c={class:"col-grow"},r={class:"q-pr-xs"},m={class:"col-12 text-h6 text-left"},v={class:"col-12 text-left"},p={key:2,class:"q-mt-md text-red"},b={key:3,class:"row q-mt-sm reverse"},y=(0,o._)("span",{class:"q-pr-xs"},"Memo",-1),g={key:4},w={class:"row col-10 justify-between"},f={class:"text-no-wrap"},h={key:0},k=(0,o._)("span",null,":  ",-1),q={class:"full-width q-mt-md"},V={key:1,class:"col-12 q-mx-sm"},C={class:"text-no-wrap"},T={key:0},x=(0,o._)("span",null,":  ",-1),_={key:4,class:"text-red"},P={key:5,class:"full-width q-mt-md"},W={class:"full-width row q-pr-none justify-between"},M={class:"col-12 col-sm-grow q-mb-sm"},D={key:0,class:"row items-center no-wrap"},S={key:0,class:"row items-center no-wrap"},H={key:0,class:"q-mt-md col-12"},U={class:"q-mt-sm full-width text-center",style:{"white-space":"nowrap"}},E={key:0,class:"full-width justify-center"},O={class:"col-12 justify-center row",ref:"qrCodeDiv"};function z(e,l,t,z,Z,I){const F=(0,o.up)("q-btn"),j=(0,o.up)("q-card-section"),Q=(0,o.up)("q-card"),A=(0,o.up)("q-input"),L=(0,o.up)("vote-option-list"),N=(0,o.up)("q-toggle"),$=(0,o.up)("key-or-name-input"),B=(0,o.up)("q-icon"),R=(0,o.up)("q-btn-toggle"),K=(0,o.up)("date-time-input"),G=(0,o.up)("remaining-time"),Y=(0,o.up)("time-span-input"),J=(0,o.up)("time-view"),X=(0,o.up)("q-spinner"),ee=(0,o.up)("social-input-list"),le=(0,o.up)("q-scroll-area"),te=(0,o.up)("qrcode-vue"),oe=(0,o.up)("q-card-selection"),ae=(0,o.up)("symbol-dialog"),ie=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(ie,null,{default:(0,o.w5)((()=>[(0,o._)("div",n,[(0,o._)("div",null,[(0,o.Wm)(Q,{class:"col q-my-sm card cardMaxWidth"},{default:(0,o.w5)((()=>[(0,o.Wm)(j,{class:"row items-center justify-left"},{default:(0,o.w5)((()=>{var l;return[(0,o._)("div",s,(0,a.zw)(e.t(e.isVotePage?"voteOnThe":"payOnThe")),1),(0,o.Wm)(F,{disable:e.blockElements,class:"col-auto q-ml-sm",dense:"",label:`${null===(l=e.chain)||void 0===l?void 0:l.name} ${e.t("network")}`,onClick:e.showWalletDialog,loading:e.loadPushVote},null,8,["disable","label","onClick","loading"])]})),_:1})])),_:1}),e.isVotePage?((0,o.wg)(),(0,o.j4)(Q,{key:0,class:"col q-my-sm card cardMaxWidth"},{default:(0,o.w5)((()=>[(0,o.Wm)(j,{class:"items-center justify-left"},{default:(0,o.w5)((()=>[(0,o.Wm)(A,{class:"q-mb-md",disable:e.blockElements,dense:"",modelValue:e.voteTitle,"onUpdate:modelValue":l[0]||(l[0]=l=>e.voteTitle=l),outlined:"",label:e.t("voteTitleOptional"),maxlength:"80"},null,8,["disable","modelValue","label"]),(0,o._)("span",u,(0,a.zw)(e.t("voteOptions")),1),(0,o.Wm)(L,{disable:e.blockElements,modelValue:e.voteOptions,"onUpdate:modelValue":l[1]||(l[1]=l=>e.voteOptions=l)},null,8,["disable","modelValue"])])),_:1})])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(Q,{class:"q-my-sm card cardMaxWidth"},{default:(0,o.w5)((()=>[(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[e.isVotePage?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",{key:0,onClick:l[3]||(l[3]=l=>e.defineCustomer=!e.defineCustomer)},[(0,o._)("span",d,(0,a.zw)(e.t("bindPayCodeToCustomer")),1),(0,o.Wm)(N,{modelValue:e.defineCustomer,"onUpdate:modelValue":l[2]||(l[2]=l=>e.defineCustomer=l),size:"md","unchecked-icon":"clear","checked-icon":"check"},null,8,["modelValue"])])),e.defineCustomer?((0,o.wg)(),(0,o.j4)($,{key:1,disable:e.blockElements,modelValue:e.customer,"onUpdate:modelValue":l[4]||(l[4]=l=>e.customer=l),outlined:"",label:e.t("customer"),class:"q-mb-md"},null,8,["disable","modelValue","label"])):(0,o.kq)("",!0),(0,o.Wm)($,{disable:e.blockElements,class:"q-mt-sm",modelValue:e.recipient,"onUpdate:modelValue":l[5]||(l[5]=l=>e.recipient=l),outlined:"",label:e.t("recipient"),walletOption:"",pubkeyOption:""},null,8,["disable","modelValue","label"])])),_:1})])),_:1}),(0,o.Wm)(Q,{class:"q-my-sm card cardMaxWidth"},{default:(0,o.w5)((()=>[(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[e.isVotePage?((0,o.wg)(),(0,o.iD)("div",{key:0,onClick:l[7]||(l[7]=l=>{e.blockElements||(e.recfund=!e.recfund)}),class:"q-mt-none q-mb-none col-grow row reverse"},[(0,o.Wm)(F,{class:(0,a.C_)(["col-auto q-mb-sm",e.isVotePage?"":"q-mb-sm"]),size:"sm",outline:"",label:e.t("provideRAM"),to:{name:"SavPay-RAM"}},null,8,["class","label"]),(0,o._)("div",c,[(0,o._)("span",r,(0,a.zw)(e.t("recommendedAmount")),1),(0,o.Wm)(N,{disable:e.blockElements,modelValue:e.recfund,"onUpdate:modelValue":l[6]||(l[6]=l=>e.recfund=l),size:"md","unchecked-icon":"clear","checked-icon":"check"},null,8,["disable","modelValue"])])])):(0,o.kq)("",!0),e.recfund?((0,o.wg)(),(0,o.j4)(A,{key:1,disable:e.blockElements,outlined:"","bottom-slots":"",modelValue:e.fund,"onUpdate:modelValue":l[9]||(l[9]=l=>e.fund=l),type:"number",label:e.t("amount"),class:"full-width","hide-bottom-space":""},{before:(0,o.w5)((()=>[(0,o.Wm)(B,{name:"monetization_on"})])),append:(0,o.w5)((()=>[(0,o.Wm)(F,{size:"sm",class:"row q-px-sm q-py-none q-ma-none",onClick:l[8]||(l[8]=l=>e.showSymbol=!0)},{default:(0,o.w5)((()=>[(0,o._)("div",m,(0,a.zw)(e.symbol),1),(0,o._)("div",v,(0,a.zw)(e.tokenContract),1)])),_:1})])),_:1},8,["disable","modelValue","label"])):(0,o.kq)("",!0),!e.isSystemToken&&e.recipient.length>13?((0,o.wg)(),(0,o.iD)("div",p,(0,a.zw)(`${e.t("onlySystemToPubKey_a")} ${e.systemTokenSymbol} ${e.t("onlySystemToPubKey_b")}!`),1)):(0,o.kq)("",!0),e.isVotePage?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",b,[(0,o.Wm)(F,{class:(0,a.C_)(["col-auto",e.isVotePage?"":"q-mb-sm"]),size:"sm",outline:"",label:e.t("provideRAM"),to:{name:"SavPay-RAM"}},null,8,["class","label"]),(0,o._)("div",{onClick:l[11]||(l[11]=l=>e.extraMemo.active=!e.extraMemo.active),class:"q-mb-none col-grow"},[y,(0,o.Wm)(N,{disable:e.blockElements,modelValue:e.extraMemo.active,"onUpdate:modelValue":l[10]||(l[10]=l=>e.extraMemo.active=l),size:"md","unchecked-icon":"clear","checked-icon":"check"},null,8,["disable","modelValue"])])])),e.isVotePage?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",g,[(0,o.wy)((0,o.Wm)(A,{disable:e.blockElements,outlined:"","bottom-slots":"",modelValue:e.extraMemo.value,"onUpdate:modelValue":l[13]||(l[13]=l=>e.extraMemo.value=l),label:"Memo",maxlength:"255",class:"full-width q-mt-none","hide-bottom-space":""},{before:(0,o.w5)((()=>[(0,o.Wm)(B,{name:"notes"})])),append:(0,o.w5)((()=>[""!==e.extraMemo.value?((0,o.wg)(),(0,o.j4)(B,{key:0,name:"close",onClick:l[12]||(l[12]=l=>e.extraMemo.value=""),class:"cursor-pointer"})):(0,o.kq)("",!0)])),_:1},8,["disable","modelValue"]),[[i.F8,e.extraMemo.active]])]))])),_:1})])),_:1}),(0,o.Wm)(Q,{class:"q-my-sm card cardMaxWidth"},{default:(0,o.w5)((()=>[(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[(0,o._)("div",w,[(0,o.wy)((0,o.Wm)(R,{modelValue:e.fixTimeType,"onUpdate:modelValue":l[14]||(l[14]=l=>e.fixTimeType=l),class:"q-mt-none q-mb-sm","no-caps":"",rounded:"",unelevated:"","toggle-color":void 0===e.fixTimeType?"red":"blue","text-color":"blue",style:{border:"1px solid #027be3"},options:[{label:e.t("optionNoTimeLimit"),value:void 0},{label:e.t("absoluteTime"),value:!0},{label:e.t("relativeTime"),value:!1}]},null,8,["modelValue","toggle-color","options"]),[[i.F8,!e.isVotePage]]),e.isVotePage?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o._)("div",null,(0,a.zw)(e.t("voteEndTime")),1),(0,o.Wm)(K,{disable:e.blockElements,class:"q-mb-sm",modelValue:e.voteEnd,"onUpdate:modelValue":l[15]||(l[15]=l=>e.voteEnd=l)},null,8,["disable","modelValue"]),(0,o._)("div",null,[(0,o._)("span",f,(0,a.zw)(e.t("timelimit")),1),void 0!==e.voteEnd?((0,o.wg)(),(0,o.iD)("span",h,[k,(0,o.Wm)(G,{modelValue:e.voteEnd,"onUpdate:modelValue":l[16]||(l[16]=l=>e.voteEnd=l),timeOverMsg:e.t("timeIsOver")},null,8,["modelValue","timeOverMsg"])])):(0,o.kq)("",!0)]),(0,o._)("div",q,(0,a.zw)(e.t("voteTime")),1)],64)):(0,o.kq)("",!0),void 0===e.fixTimeType?((0,o.wg)(),(0,o.iD)("div",V,(0,a.zw)(e.t("noFraudProtect")),1)):!0===e.fixTimeType?((0,o.wg)(),(0,o.iD)(o.HY,{key:2},[(0,o.Wm)(K,{disable:e.blockElements,class:"q-mb-sm",modelValue:e.absolutLimit,"onUpdate:modelValue":l[17]||(l[17]=l=>e.absolutLimit=l)},null,8,["disable","modelValue"]),(0,o._)("div",null,[(0,o._)("span",C,(0,a.zw)(e.t("timelimit")),1),void 0!==e.absolutLimit?((0,o.wg)(),(0,o.iD)("span",T,[x,(0,o.Wm)(G,{modelValue:e.absolutLimit,"onUpdate:modelValue":l[18]||(l[18]=l=>e.absolutLimit=l),timeOverMsg:e.t("timeIsOver")},null,8,["modelValue","timeOverMsg"])])):(0,o.kq)("",!0)])],64)):!1===e.fixTimeType?((0,o.wg)(),(0,o.j4)(Y,{key:3,modelValue:e.relativeLimit,"onUpdate:modelValue":l[19]||(l[19]=l=>e.relativeLimit=l)},null,8,["modelValue"])):(0,o.kq)("",!0),e.timeIsTooHigh?((0,o.wg)(),(0,o.iD)("div",_,(0,a.zw)(e.t("timeToHigh")),1)):(0,o.kq)("",!0),e.isVotePage?((0,o.wg)(),(0,o.iD)("div",P,[(0,o._)("span",null,(0,a.zw)(e.t("punishTimeSpan"))+":  ",1),(0,o.Wm)(J,{class:"col",showTime:e.decisionTime,minTime:60,belowMinMsg:e.t("minPunishTime"),valueClasses:"text-green"},null,8,["showTime","belowMinMsg"])])):(0,o.kq)("",!0)])])),_:1})])),_:1})]),(0,o.Wm)(Q,{class:"q-mb-md card cardMaxWidth"},{default:(0,o.w5)((()=>[(0,o.Wm)(j,null,{default:(0,o.w5)((()=>[(0,o._)("div",W,[(0,o._)("div",M,[e.isVotePage?((0,o.wg)(),(0,o.j4)(R,{key:0,disable:!e.paymentcode||!0===e.publicConfirmed,modelValue:e.voteType,"onUpdate:modelValue":l[20]||(l[20]=l=>e.voteType=l),push:"",glossy:"","toggle-color":"blue",options:!0!==e.publicConfirmed?[{label:e.t("publicVote"),value:"public",slot:"public"},{label:e.t("privateVote"),value:"private",slot:"private"}]:[{label:e.t("publicVote"),value:"public",slot:"public"}],onClick:e.voteTypeClick,dense:e.$q.screen.width<320},{public:(0,o.w5)((()=>[e.$q.screen.gt.xs?((0,o.wg)(),(0,o.iD)("div",D,[e.loadPushVote?((0,o.wg)(),(0,o.j4)(X,{key:0,color:"primary"})):((0,o.wg)(),(0,o.j4)(B,{key:1,right:"",name:"cloud_upload"}))])):(0,o.kq)("",!0)])),private:(0,o.w5)((()=>[e.$q.screen.gt.xs?((0,o.wg)(),(0,o.iD)("div",S,[(0,o.Wm)(B,{right:"",name:"supervised_user_circle"})])):(0,o.kq)("",!0)])),_:1},8,["disable","modelValue","options","onClick","dense"])):(0,o.kq)("",!0)]),e.isVotePage&&void 0!==e.publicConfirmed&&!0!==e.publicConfirmed?((0,o.wg)(),(0,o.iD)("div",H,[(0,o.Wm)(ee,{modelValue:e.socialList,"onUpdate:modelValue":l[21]||(l[21]=l=>e.socialList=l),disable:e.blockElements},null,8,["modelValue","disable"]),(0,o.Wm)(F,{disable:e.blockElements,class:"full-width q-mt-lg",label:e.t("publishVote"),"icon-right":"send",onClick:e.makeVotePublic,color:"blue"},null,8,["disable","label","onClick"])])):(0,o.kq)("",!0),!1!==e.publicConfirmed?((0,o.wg)(),(0,o.j4)(F,{key:1,class:"col-1",disable:0==e.paymentcode.length,icon:"content_copy",onClick:l[22]||(l[22]=l=>e.copy(e.paymentcode))},null,8,["disable"])):(0,o.kq)("",!0),!1!==e.publicConfirmed?((0,o.wg)(),(0,o.j4)(F,{key:2,class:"col-1",disable:0==e.paymentcode.length,icon:"qr_code",onClick:l[23]||(l[23]=l=>e.copyQrImage(e.qrCodeDiv,e.t))},null,8,["disable"])):(0,o.kq)("",!0),!1!==e.publicConfirmed?((0,o.wg)(),(0,o.j4)(F,{key:3,class:"col-1",disable:0==e.paymentcode.length,icon:"download",onClick:l[24]||(l[24]=l=>e.downloadQrCode(e.qrCodeDiv))},null,8,["disable"])):(0,o.kq)("",!0),!1!==e.publicConfirmed?((0,o.wg)(),(0,o.j4)(le,{key:4,class:"col-12",visible:!0,style:{height:"35px"}},{default:(0,o.w5)((()=>[(0,o._)("div",U,(0,a.zw)(e.paymentcode),1)])),_:1})):(0,o.kq)("",!0)]),e.paymentcode&&!1!==e.publicConfirmed?((0,o.wg)(),(0,o.iD)("div",E,[(0,o._)("div",O,[(0,o.Wm)(te,{value:e.paymentcode,size:300,level:"L",margin:1,onClick:e.copyQrImage},null,8,["value","onClick"])],512)])):(0,o.kq)("",!0)])),_:1})])),_:1}),(0,o.wy)((0,o.Wm)(Q,{class:"card q-pa-md q-mb-md cardMaxWidth"},{default:(0,o.w5)((()=>[(0,o.Wm)(oe,null,{default:(0,o.w5)((()=>[(0,o.Wm)(F,{class:"full-width",color:"red",label:e.t("resetVote"),"icon-right":"restart_alt",onClick:e.voteReset},null,8,["label","onClick"])])),_:1})])),_:1},512),[[i.F8,!0===e.publicConfirmed]])]),(0,o.Wm)(ae,{modelValue:e.showSymbol,"onUpdate:modelValue":l[25]||(l[25]=l=>e.showSymbol=l),contract:e.tokenContract,"onUpdate:contract":l[26]||(l[26]=l=>e.tokenContract=l),symbol:e.symbol,"onUpdate:symbol":l[27]||(l[27]=l=>e.symbol=l),connect:e.connect,precision:e.precision,"onUpdate:precision":l[28]||(l[28]=l=>e.precision=l)},null,8,["modelValue","contract","symbol","connect","precision"])])),_:1})}var Z=t(14889),I=t(79343),F=t(46033),j=t(22759),Q=t(89889),A=t(72902),L=t(48635),N=t(22931),$=t(17457),B=t(65054),R=t(6827),K=t(5980),G=t(94345),Y=t(62659),J=t(60499),X=t(27712),ee=t(7580),le=t(28339),te=t(86350),oe=t(72354),ae=t(74544),ie=t(53103),ne=t(79378),se=t(48837),ue=t(17779),de=function(e,l,t,o){function a(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,i){function n(e){try{u(o.next(e))}catch(l){i(l)}}function s(e){try{u(o["throw"](e))}catch(l){i(l)}}function u(e){e.done?t(e.value):a(e.value).then(n,s)}u((o=o.apply(e,l||[])).next())}))};const ce=(0,o.aZ)({name:"page-receive",components:{KeyOrNameInput:Z["default"],DateTimeInput:F["default"],RemainingTime:j["default"],TimeView:Q["default"],SymbolDialog:A["default"],TimeSpanInput:I["default"],QrcodeVue:N.Z,VoteOptionList:L["default"],SocialInputList:$["default"]},setup(){var e,l;const t=(0,X.QT)({useScope:"global"}).t.bind(this),a=(0,Y.r)(),i=(0,le.yj)(),n=i.query,s=1==n.vote||null===n.vote,u=(0,J.iH)(["",""]),d=(0,J.iH)(!1),c=(0,J.iH)([]),r=(0,J.iH)("private"),m=(0,o.Fl)({get:()=>r.value,set:e=>{!0!==b.value&&(r.value=e)}}),v=(0,J.iH)("");function p(){"public"==m.value&&!0!==b.value?(b.value=!1,a.walletUser||a.showWalletDialog()):b.value=void 0}const b=(0,J.iH)(void 0),y=(0,o.Fl)((()=>a.selectedConnect)),g=(0,J.iH)(""),w=(0,o.Fl)({get:()=>g.value,set:e=>{e.length>13&&"undefined"==typeof D.value&&(D.value=!0),g.value=e}}),f=(0,J.iH)(""),h=(0,o.Fl)({get:()=>f.value,set:e=>{e.length>13&&"undefined"==typeof D.value&&(D.value=!0),f.value=e}}),k=(0,J.iH)(!1),q=(0,J.iH)(!1),V=(0,J.iH)((null===(l=null===(e=a.selectedConnect)||void 0===e?void 0:e.chainParams.systemToken)||void 0===l?void 0:l.contract)?a.selectedConnect.chainParams.systemToken.contract:"eosio.token"),C=(0,J.iH)(!0),T=(0,J.iH)(0),x=(0,J.iH)(4),_=(0,J.iH)("EOS"),P=(0,J.iH)({active:!1,value:""}),W=(0,J.iH)(!0),M=(0,o.Fl)((()=>"undefined"!=typeof D.value)),D=(0,o.Fl)({set:e=>{if("boolean"==typeof e){if(!ce())return}else if(h.value.length>13||w.value.length>13)return void R.Z.create({type:"negative",message:t("keyUseSavPay"),position:"top"});W.value=!!s||e},get:()=>W.value}),S=(0,J.iH)(new Date(Date.now()+5184e5)),H=(0,J.iH)(new Date(Date.now()+6048e5)),U=(0,J.iH)(604800),E=(0,o.Fl)((()=>H.value&&"function"==typeof H.value.getTime&&S.value&&"function"==typeof S.value.getTime?(H.value.getTime()-S.value.getTime())/1e3:void 0)),O=(0,o.Fl)((()=>{var e;return null===(e=a.selectedConnect)||void 0===e?void 0:e.chainParams})),z=(0,o.Fl)((()=>H.value&&"function"==typeof H.value.getTime?Math.round(H.value.getTime()/1e3):void 0)),Z=(0,o.Fl)((()=>{if(D.value){if(void 0===z.value)return;return z.value>4294967295}return U.value>4294967295})),I=(0,o.Fl)((()=>{var e,l;return null===(l=null===(e=a.selectedConnect)||void 0===e?void 0:e.chainParams.systemToken)||void 0===l?void 0:l.symbol})),F=(0,o.Fl)((()=>{var e,l;return V.value==(null===(l=null===(e=a.selectedConnect)||void 0===e?void 0:e.chainParams.systemToken)||void 0===l?void 0:l.contract)&&_.value==I.value})),j=(0,o.Fl)((()=>T.value<0?"":(0,G.AssetToString)({amount:BigInt(Math.round(T.value*Math.pow(10,x.value))),symbol:{name:_.value,precision:x.value}}))),Q=(0,o.Fl)((()=>{var e,l,t,o;if(T.value<0)return"";const i=(null===(l=null===(e=a.selectedConnect)||void 0===e?void 0:e.chainParams.systemToken)||void 0===l?void 0:l.symbol)!=_.value||(null===(o=null===(t=a.selectedConnect)||void 0===t?void 0:t.chainParams.systemToken)||void 0===o?void 0:o.contract)!=V.value;return`${j.value}${i?" "+V.value:""}`}));function A(){return Math.floor(127*Math.random())}const L=(0,J.iH)(A()),N=(0,J.iH)(BigInt(1)),$=(0,o.Fl)((()=>{if(Z.value)return"";const e=s?{type:"public"==m.value?Y.P.PublicVote:Y.P.PrivateVote,id:L.value,options:u.value,title:v.value,end:S.value.getTime()/1e3,publicIndex:N.value}:void 0;return(0,se.GenerateLink)(O.value,w.value,P.value,Q.value,D.value,D.value?z.value:U.value,k.value?h.value:void 0,e)}));function ce(){return!1!==re()||(R.Z.create({type:"negative",message:t("errSavPayNotAvailable"),position:"top"}),D.value=void 0,!1)}function re(){if(a.selectedConnect&&a.selectedConnect.chainParams)return!!a.selectedConnect.chainParams.savpayContract}function me(e){(0,B.Z)(e).then((()=>{R.Z.create({type:"positive",message:t("copyToClip"),caption:(0,te.shrinkText)(e,80),position:"top"})})).catch((()=>{R.Z.create({type:"negative",message:t("errCopyClip"),position:"top"})}))}const ve=(0,J.iH)();function pe(){return de(this,void 0,void 0,(function*(){s&&(a.walletUser?be():a.showWalletDialog())}))}function be(){return de(this,void 0,void 0,(function*(){if(ue.log("pushVoteOptions"),void 0===y.value.chainParams.savpayContract)return ue.log(t("errSavPayNotAvailable")),void R.Z.create({type:"negative",message:t("errSavPayNotAvailable"),position:"top"});if(c.value.length>0)for(let a of c.value)if(0==a.url.length)return void R.Z.create({type:"negative",message:t("errSocialUrlEmpty"),position:"top"});if(!a.walletUser||void 0===a.walletUser.name)return void ue.log("No wallet user name.");const e=a.walletUser.name;if("boolean"!=typeof D.value||!1===D.value)return void ue.log("No fix time.");if("number"!=typeof z.value)return void ue.log("No absolute limit.");d.value=!0,v.value=v.value.trim();const l=yield ye(),o={ramBy:e,holder:w.value,vid:L.value,vt:Math.floor(S.value.getTime()/1e3),t:z.value,rtoken:j.value,rtcontract:V.value,title:v.value,voptions:u.value,links:c.value},i=R.Z.create({type:"ongoing",message:t("signTrx"),position:"top"}),n={isError:!1,notify:i};let s=yield K.Connect.sendTrx(n,a.walletUser,e,y.value.chainParams.savpayContract,"addvote",o,!1,a.walletUser.permission);if((0,oe.trxSigningErrorHandling)(n,s,t)&&y.value&&(yield(0,oe.broadcastTrx)(n,y.value,s,t))){const e=yield ge(l,o);!1===e?(b.value=!1,n.notify?n.notify({type:"negative",message:t("voteIsNotOnline")}):R.Z.create({type:"negative",message:t("voteIsNotOnline"),position:"top"})):(N.value=e,b.value=!0,n.notify?n.notify({type:"positive",message:t("voteIsOnline")}):R.Z.create({type:"positive",message:t("voteIsOnline"),position:"top"}))}d.value=!1}))}function ye(){return de(this,void 0,void 0,(function*(){const e=yield y.value.get_table_rows({code:y.value.chainParams.savpayContract,scope:y.value.chainParams.savpayContract,table:"votes",limit:1,reverse:!0,show_payer:!1});return e&&"rows"in e&&Array.isArray(e.rows)&&e.rows.length>0?e.rows[0].index:0}))}function ge(e,l,t,o=30){return de(this,void 0,void 0,(function*(){ue.log("Get table by lower bound",e);try{const a=l.holder.length<=13?(0,ee.nameToFromHex)(l.holder):(0,ee.hexWithTypeOfPubKey)(ie.PublicKey.fromString(l.holder)),i=yield y.value.get_table_rows({code:y.value.chainParams.savpayContract,scope:y.value.chainParams.savpayContract,table:"votes",lower_bound:String(e),upper_bound:void 0!==t&&t.low>e?String(t.low-1):void 0,limit:10,reverse:!0,show_payer:!1});if(ue.log("table result",i),i&&"rows"in i&&Array.isArray(i.rows)&&i.rows.length>0){let n=i.rows[0].index,s=i.rows[0].index;ue.log("Check from",i.rows[0].index,"to",i.rows[i.rows.length-1].index);const u=i.rows.find((e=>{if(e.index<n&&(n=e.index),e.index>s&&(s=e.index),e.ramBy===l.ramBy&&e.vid===l.vid&&e.vt===l.vt&&e.t===l.t&&e.rtoken===l.rtoken&&e.rtcontract===l.rtcontract){if(!(0,ne.optionsAreEqual)(e.options,l.voptions)||!(0,ne.linksAreEqual)(l.links,e.links))return!1;if(e.ramBy===l.holder){if(""==e.holder)return!0}else if(a===e.holder)return!0;return!1}}));return u?BigInt(u.index):(void 0===t?t={low:n,high:s}:(t.low>n&&(t.low=n),t.high<s&&(t.high=s)),o--,!(o<=0)&&(yield(0,ae.sleep)(1e3),n<=e&&void 0!=s?(ue.log("Check again newest"),yield ge(s,l,t,o)):(ue.log("Check older entries until new"),yield ge(e,l,t))))}}catch(a){ue.log("Error on checking public vote entry",a)}return!1}))}const we=(0,o.Fl)((()=>!!s&&(d.value||b.value)));function fe(){d.value=!1,u.value=["",""],c.value=[],b.value=!1,L.value=A()}return{t,isVotePage:s,paymentcode:$,recipient:w,customer:h,defineCustomer:k,recfund:C,fund:T,symbol:_,precision:x,extraMemo:P,relativeLimit:U,absolutLimit:H,limitActive:M,voteEnd:S,tokenContract:V,chain:O,showSymbol:q,copy:me,showWalletDialog:a.showWalletDialog,connect:y,fixTimeType:D,timeIsTooHigh:Z,downloadQrCode:se.downloadQrCode,qrCodeDiv:ve,copyQrImage:se.copyQrImage,isSystemToken:F,systemTokenSymbol:I,voteOptions:u,decisionTime:E,loadPushVote:d,voteType:m,publicConfirmed:b,voteTypeClick:p,blockElements:we,makeVotePublic:pe,socialList:c,voteReset:fe,voteTitle:v}}});var re=t(11639),me=t(69885),ve=t(44458),pe=t(63190),be=t(68879),ye=t(13119),ge=t(22857),we=t(23175),fe=t(1389),he=t(13902),ke=t(66663),qe=t(69984),Ve=t.n(qe);const Ce=(0,re.Z)(ce,[["render",z]]),Te=Ce;Ve()(ce,"components",{QPage:me.Z,QCard:ve.Z,QCardSection:pe.Z,QBtn:be.Z,QInput:ye.Z,QIcon:ge.Z,QToggle:we.Z,QBtnToggle:fe.Z,QSpinner:he.Z,QScrollArea:ke.Z})}}]);